<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Happy Birthday my love</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container">
      <div class="sticker">
        <img
          src="https://i.pinimg.com/originals/e2/99/c1/e299c11aff61a24f7dd68ab7161d6364.gif"
        />
      </div>
      <div class="message">
        <p>Will you stay with me forever?ğŸ¥ºâ¤ï¸</p>
      </div>

      <div class="button">
        <button class="btn-yes" id="btn">Yes</button>
        <button class="btn-no" id="btn-no">NO</button>
      </div>
    </div>

    <!-- Pop-up box -->
    <div class="popup">
      <img
        src="https://media.tenor.com/O1Zk8YvgJ-EAAAAj/peach-goma-peach.gif"
        alt="gif"
      />
      <p>Promise?ğŸ¥ºâ¤ï¸</p>
      <div class="input">
        <h1 class="answer">Answer:</h1>
        <input type="text" id="messageInput" placeholder="Answer?" />
        <button type="submit" id="send">Send</button>
      </div>
      <p id="successMessage" class="success-message">
        Message sent successfully! ğŸ’•
      </p>
    </div>

    <!-- Overlay -->
    <div class="overlay"></div>

    <script>
      // JavaScript to toggle the pop-up and overlay
      const button = document.getElementById("btn");
      const popup = document.querySelector(".popup");
      const overlay = document.querySelector(".overlay");

      button.addEventListener("click", () => {
        popup.classList.toggle("visible");
        overlay.classList.toggle("visible");
      });

      // Close the pop-up when clicking outside (on the overlay)
      overlay.addEventListener("click", () => {
        popup.classList.remove("visible");
        overlay.classList.remove("visible");
      });

      // Make the "NO" button move randomly when clicked
      const noButton = document.getElementById("btn-no");

      noButton.addEventListener("click", () => {
        const container = document.querySelector(".container");
        const containerRect = container.getBoundingClientRect();
        const buttonRect = noButton.getBoundingClientRect();

        // Calculate random position within the container
        const maxX = containerRect.width - buttonRect.width;
        const maxY = containerRect.height - buttonRect.height;

        const randomX = Math.floor(Math.random() * maxX);
        const randomY = Math.floor(Math.random() * maxY);

        // Apply the new position
        noButton.style.position = "absolute";
        noButton.style.left = `${randomX}px`;
        noButton.style.top = `${randomY}px`;
      });

      //sending message
      // First, request notification permission when the page loads
      document.addEventListener("DOMContentLoaded", function () {
        if (!("Notification" in window)) {
          alert("This browser does not support notifications");
        } else {
          Notification.requestPermission();
        }
      });

      document.getElementById("send").addEventListener("click", function () {
        const messageInput = document.getElementById("messageInput");
        const message = messageInput.value;

        // Check if we have permission to send notifications
        if (Notification.permission === "granted") {
          // Create and show the notification
          new Notification("New Message! ğŸ’Œ", {
            body: message,
            icon: "https://media.tenor.com/O1Zk8YvgJ-EAAAAj/peach-goma-peach.gif",
          });

          // Show success message
          const successMessage = document.getElementById("successMessage");
          successMessage.style.display = "block";

          // Clear input
          messageInput.value = "";

          // Hide success message after 3 seconds
          setTimeout(() => {
            successMessage.style.display = "none";
          }, 3000);
        } else {
          // If we don't have permission, request it
          Notification.requestPermission().then(function (permission) {
            if (permission === "granted") {
              // Try sending the notification again
              new Notification("New Message! ğŸ’Œ", {
                body: message,
                icon: "https://media.tenor.com/O1Zk8YvgJ-EAAAAj/peach-goma-peach.gif",
              });
            }
          });
        }
      });
    </script>
  </body>
</html>
